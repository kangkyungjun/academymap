<html lang="ko">
{% load static %}

{% include 'main/headers.html' %}



<body>


{% block contents %}
{% endblock %}



</body>

</html>

{% block extra_js %}
<!-- Chart.js 및 DataLabels 플러그인 로드 (CDN 사용) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const ctx = document.getElementById('tuitionChart').getContext('2d');

  // 뷰에서 전달한 JSON 데이터를 사용
  const labels = {{ chart_labels|safe }};
  const dataValues = {{ chart_data|safe }};

  // 첫 번째 막대는 다른 색상 적용 (예: #1aff66)
  const backgroundColors = dataValues.map((val, index) => {
    return index === 0 ? "#1aff66" : "rgba(75, 192, 192, 0.2)";
  });
  const borderColors = dataValues.map((val, index) => {
    return index === 0 ? "#e6ffee" : "rgba(75, 192, 192, 1)";
  });

  const tuitionChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: '수강료 평균',
        data: dataValues,
        backgroundColor: backgroundColors,
        borderColor: borderColors,
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: function(value) {
              return Math.round(value).toLocaleString();
            }
          }
        }
      },
      plugins: {
        legend: {
          display: false
        },
        datalabels: {
          anchor: 'end',
          align: 'end',
          formatter: function(value) {
            return Math.round(value).toLocaleString();
          },
          font: {
            // index가 0일 때는 bold, 그 외는 normal
            weight: function(context) {
              return context.dataIndex === 0 ? 'bold' : 'normal';
            }
          }
        }
      }
    },
    plugins: [ChartDataLabels]
  });
});
</script>

{% endblock %}


